@tailwind base;
@tailwind components;
@tailwind utilities;
# backend/server.js
const express = require('express');
const cors = require('cors');
require('dotenv').config();

const app = express();
app.use(cors());
app.use(express.json());

app.use('/auth', require('./routes/auth'));
app.use('/farms', require('./routes/farms'));
app.use('/recommendations', require('./routes/recommendations'));
app.use('/payments', require('./routes/payments'));

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Server running on port ${PORT}`));

# backend/config/db.js
const { Pool } = require('pg');
const pool = new Pool({ connectionString: process.env.DATABASE_URL });
module.exports = pool;

# backend/config/stripe.js
const Stripe = require('stripe');
const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);
module.exports = stripe;

# backend/controllers/recommendationController.js
const OpenAI = require('openai');
const pool = require('../config/db');
const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

exports.getRecommendation = async (req, res) => {
  const { farmId } = req.params;
  const farm = await pool.query('SELECT * FROM farms WHERE id = $1', [farmId]);
  if (!farm.rows.length) return res.status(404).json({ error: 'Farm not found' });

  const prompt = `Provide farm recommendations for: ${JSON.stringify(farm.rows[0])}`;
  const response = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: [{ role: 'user', content: prompt }]
  });

  res.json({ recommendation: response.choices[0].message.content });
};

# backend/routes/recommendations.js
const express = require('express');
const router = express.Router();
const { getRecommendation } = require('../controllers/recommendationController');
router.get('/:farmId', getRecommendation);
module.exports = router;

# frontend/package.json
{
  "name": "k-farm-frontend",
  "version": "1.0.0",
  "scripts": { "start": "react-scripts start" },
  "dependencies": { "react": "^18.2.0", "react-dom": "^18.2.0", "axios": "^1.5.0", "tailwindcss": "^3.3.3" }
}

# frontend/tailwind.config.js
module.exports = {
  content: ["./src/**/*.{js,jsx,ts,tsx}"],
  theme: { extend: { colors: { primary: '#22c55e', secondary: '#16a34a' } } },
  plugins: [],
};

# frontend/src/App.js
import React from 'react';
import Dashboard from './pages/Dashboard';
function App() { return <Dashboard />; }
export default App;

# frontend/src/pages/Dashboard.js
import React, { useEffect, useState } from 'react';
import api from '../services/api';
const Dashboard = () => {
  const [farms, setFarms] = useState([]);
  useEffect(() => { api.get('/farms').then(res => setFarms(res.data)); }, []);
  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-4">Your Farms</h1>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {farms.map(farm => <div key={farm.id} className="border p-4 rounded">{farm.name}</div>)}
      </div>
    </div>
  );
};
export default Dashboard;

# frontend/src/services/api.js
import axios from 'axios';
const api = axios.create({ baseURL: process.env.REACT_APP_API_URL });
export default api;

# .env.example
DATABASE_URL=
OPENAI_API_KEY=
STRIPE_SECRET_KEY=
REACT_APP_API_URL=http://localhost:5000

# README.md
# K-Farm
AI-powered farm management app. Monitor crops, optimize irrigation, and get AI recommendations. Mobile-friendly dashboard. Subscription-based (Stripe) with Free and Pro tiers.
