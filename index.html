<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Karakunku Farm Ledger</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(to bottom right, #fefefe, #e6e6e6); margin: 0; padding: 20px; color: #333; }
h1, h3 { text-align: center; font-family: 'Georgia', serif; color: #bfa058; text-shadow: 1px 1px 2px #555; }
hr { border: 1px solid #bfa058; margin: 20px 0; }
#transactionForm, #transactions, #summary { background: linear-gradient(145deg, #d9d9d9, #ffffff); border: 2px solid #c0c0c0; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0px 0px 15px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s; }
#transactionForm:hover, #transactions:hover, #summary:hover { transform: translateY(-5px); box-shadow: 0px 10px 25px rgba(0,0,0,0.2); }
label { display: block; margin: 10px 0; font-weight: bold; color: #555; }
input, select { padding: 8px; border-radius: 8px; border: 1px solid #c0c0c0; width: 100%; max-width: 300px; box-sizing: border-box; margin-top: 5px; }
button { margin-top: 15px; padding: 10px 20px; border: none; border-radius: 12px; background: linear-gradient(45deg, #ffd700, #bfa058); color: #fff; font-weight: bold; cursor: pointer; box-shadow: 0px 5px 10px rgba(0,0,0,0.2); transition: transform 0.2s, box-shadow 0.2s; }
button:hover { transform: translateY(-3px); box-shadow: 0px 10px 20px rgba(0,0,0,0.3); }
pre { white-space: pre-wrap; word-wrap: break-word; background: linear-gradient(135deg, #e0e0e0, #ffffff); border-radius: 12px; padding: 15px; border: 1px solid #c0c0c0; }
</style>
</head>
<body>
<h1>Karakunku Farm Ltd</h1>
<h3>Jarra Barrow Kunda, The Gambia</h3>
<hr>
<div id="transactionForm">
<h2>Add Transaction</h2>
<label>Type:
<select id="type">
<option value="sale">Sale</option>
<option value="expense">Expense</option>
</select>
</label>
<label>Item: <input id="item" type="text"></label>
<label>Qty: <input id="qty" type="number" value="1"></label>
<label>Total: <input id="total" type="number" value="0"></label>
<button id="addTx">Add Transaction</button>
</div>
<div id="transactions"></div>
<button id="generateInvoice">Generate Invoice PDF</button>
<button id="getSummary">Get AI Summary</button>
<pre id="summary"></pre>
<script>
const { jsPDF } = window.jspdf;
function getTransactions() { return JSON.parse(localStorage.getItem('transactions')||'[]'); }
function saveTransactions(txs) { localStorage.setItem('transactions', JSON.stringify(txs)); }
function renderTransactions() { const txs=getTransactions(); document.getElementById('transactions').innerHTML="<h2>Transactions</h2>"+JSON.stringify(txs,null,2); }
document.getElementById('addTx').onclick=()=>{ const txs=getTransactions(); const tx={ type:document.getElementById('type').value, item:document.getElementById('item').value, qty:Number(document.getElementById('qty').value), total:Number(document.getElementById('total').value), date:new Date().toISOString() }; txs.push(tx); saveTransactions(txs); renderTransactions(); };
document.getElementById('generateInvoice').onclick=()=>{ const txs=getTransactions(); const doc=new jsPDF(); doc.setFontSize(16); doc.text("Karakunku Farm Ltd",10,10); doc.text("Jarra Barrow Kunda, The Gambia",10,20); let y=40; txs.forEach((t,i)=>{ doc.text(`${i+1}. ${t.item} (${t.type}) - Qty: ${t.qty}, Total: ${t.total}`,10,y); y+=10; }); doc.save("invoice.pdf"); };
document.getElementById('getSummary').onclick=()=>{ const txs=getTransactions(); const total_sales=txs.filter(t=>t.type==='sale').reduce((a,b)=>a+b.total,0); const total_expenses=txs.filter(t=>t.type==='expense').reduce((a,b)=>a+b.total,0); const net=total_sales-total_expenses; const topItemMap={}; txs.forEach(t=>{ const name=t.item; topItemMap[name]=(topItemMap[name]||0)+t.qty; }); const topItem=Object.keys(topItemMap).reduce((a,b)=>topItemMap[a]>topItemMap[b]?a:b,null); const summary=`Total Sales: ${total_sales}
Total Expenses: ${total_expenses}
Net Profit: ${net}
Top Item by Quantity Sold: ${topItem}
Recommendation 1: Track sales and expenses monthly.
Recommendation 2: Focus on selling top-performing items.`; document.getElementById('summary').innerText=summary; };
window.onload=renderTransactions;
</script>
</body>
</html>
