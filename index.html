<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ‡¬ðŸ‡² GambiaBiz Ledger - Smart Financial Assistant</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><rect width='64' height='64' rx='10' fill='%232E8B57'/><text x='32' y='40' text-anchor='middle' font-size='28' fill='white'>G</text></svg>">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f5f5f5;color:#333;line-height:1.6}
.container{max-width:850px;margin:auto;padding:20px;background:#fff;min-height:100vh}
header{text-align:center;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #2E8B57}
header h1{color:#2E8B57;font-size:2em;margin-bottom:5px}
.tabs{display:flex;margin-bottom:15px;border-bottom:1px solid #ddd}
.tab-btn{flex:1;padding:10px;border:none;background:none;cursor:pointer;font-weight:600;border-bottom:3px solid transparent}
.tab-btn.active{border-color:#2E8B57;color:#2E8B57}
.tab-content{display:none}
.tab-content.active{display:block}
.summary-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:25px}
.card{background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center}
.amount{font-size:1.5em;font-weight:bold}
.amount.positive{color:#2E8B57}.amount.negative{color:#dc3545}
.btn-primary,.btn-secondary{padding:10px;border:none;border-radius:8px;font-size:1em;cursor:pointer;transition:0.3s;width:100%}
.btn-primary{background:#2E8B57;color:white}.btn-secondary{background:#6c757d;color:white}
.btn-primary:hover{background:#236b47}.btn-secondary:hover{background:#545b62}
.quick-actions{display:flex;gap:10px;margin-bottom:25px}
.transaction-item{background:#fff;padding:10px;margin-bottom:10px;border-radius:8px;box-shadow:0 1px 5px rgba(0,0,0,0.1);display:flex;justify-content:space-between;align-items:center}
.transaction-amount.positive{color:#2E8B57;font-weight:bold}
.transaction-amount.negative{color:#dc3545;font-weight:bold}
.modal{display:none;position:fixed;z-index:1000;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5)}
.modal-content{background:white;margin:5% auto;padding:20px;border-radius:10px;width:90%;max-width:500px;position:relative}
.close{position:absolute;right:15px;top:10px;font-size:25px;cursor:pointer}
form input,form select{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:6px}
.form-actions{display:flex;gap:10px}
.form-actions button{flex:1;padding:10px;border:none;border-radius:6px;cursor:pointer}
.form-actions button[type=submit]{background:#2E8B57;color:white}
.notification{position:fixed;bottom:15px;right:15px;padding:12px 18px;background:#2E8B57;color:#fff;border-radius:6px;display:none}
.ai-summary{background:#f8f9fa;padding:15px;border-left:4px solid #2E8B57;border-radius:10px;margin:20px 0}
.charts{background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
@media(max-width:600px){.quick-actions{flex-direction:column}}
</style>
</head>
<body>
<div class="container">
<header>
  <h1>ðŸ‡¬ðŸ‡² GambiaBiz Ledger</h1>
  <p>Smart Financial Assistant for MSMEs</p>
</header>

<nav class="tabs">
  <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
  <button class="tab-btn" data-tab="transactions">Transactions</button>
  <button class="tab-btn" data-tab="invoices">Invoices</button>
  <button class="tab-btn" data-tab="reports">Reports</button>
</nav>

<!-- Dashboard -->
<div id="dashboard" class="tab-content active">
  <div class="summary-cards">
    <div class="card"><h3>Total Balance</h3><p id="totalBalance" class="amount">GMD 0.00</p></div>
    <div class="card"><h3>This Month</h3><p id="monthlyIncome" class="amount positive">GMD 0.00</p></div>
    <div class="card"><h3>Expenses</h3><p id="monthlyExpenses" class="amount negative">GMD 0.00</p></div>
  </div>
  <div class="quick-actions">
    <button class="btn-primary" onclick="showModal('transactionModal')">âž• Add Transaction</button>
    <button class="btn-secondary" onclick="showModal('invoiceModal')">ðŸ§¾ Create Invoice</button>
  </div>
  <div>
    <h3>Recent Activity</h3>
    <div id="recentTransactions"></div>
  </div>
</div>

<!-- Transactions -->
<div id="transactions" class="tab-content">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
    <h2>All Transactions</h2>
    <button class="btn-primary" onclick="showModal('transactionModal')">Add</button>
  </div>
  <div style="display:flex;gap:10px;margin-bottom:10px;">
    <select id="typeFilter">
      <option value="all">All</option>
      <option value="sale">Sales</option>
      <option value="expense">Expenses</option>
    </select>
    <input type="date" id="dateFilter">
  </div>
  <div id="allTransactions"></div>
</div>

<!-- Invoices -->
<div id="invoices" class="tab-content">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
    <h2>Invoices</h2>
    <button class="btn-primary" onclick="showModal('invoiceModal')">Create</button>
  </div>
  <div id="invoicesList"></div>
</div>

<!-- Reports -->
<div id="reports" class="tab-content">
  <h2>Financial Reports</h2>
  <div style="display:flex;gap:10px;margin:10px 0;">
    <button class="btn-secondary" onclick="generateFinancialSummary()">ðŸ“Š AI Summary</button>
    <button class="btn-secondary" onclick="exportData()">ðŸ“¤ Export</button>
  </div>
  <div id="aiSummary" class="ai-summary"></div>
  <div class="charts"><canvas id="financeChart" width="400" height="200"></canvas></div>
</div>
</div>

<!-- Transaction Modal -->
<div id="transactionModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('transactionModal')">&times;</span>
    <h3>Add Transaction</h3>
    <form id="transactionForm">
      <select id="transactionType" required>
        <option value="">Select Type</option>
        <option value="sale">Sale</option>
        <option value="expense">Expense</option>
      </select>
      <input type="number" id="amount" placeholder="Amount (GMD)" step="0.01" required>
      <input type="text" id="description" placeholder="Description" required>
      <input type="date" id="transactionDate" required>
      <div class="form-actions">
        <button type="button" onclick="closeModal('transactionModal')">Cancel</button>
        <button type="submit">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Invoice Modal -->
<div id="invoiceModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('invoiceModal')">&times;</span>
    <h3>Create Invoice</h3>
    <form id="invoiceForm">
      <input type="text" id="customerName" placeholder="Customer Name" required>
      <input type="text" id="customerPhone" placeholder="Customer Phone">
      <div id="invoiceItems">
        <div class="invoice-item">
          <input type="text" placeholder="Item description" class="item-desc" required>
          <input type="number" placeholder="Qty" class="item-qty" required min="1">
          <input type="number" placeholder="Price" class="item-price" required step="0.01">
        </div>
      </div>
      <button type="button" onclick="addInvoiceItem()">âž• Add Item</button>
      <div class="form-actions">
        <button type="button" onclick="closeModal('invoiceModal')">Cancel</button>
        <button type="submit">Generate</button>
      </div>
    </form>
  </div>
</div>

<div id="syncNotification" class="notification"><span id="syncMessage"></span></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
class GambiaBizLedger {
 constructor(){this.transactions=JSON.parse(localStorage.getItem('transactions')||'[]');this.invoices=JSON.parse(localStorage.getItem('invoices')||'[]');this.init();}
 init(){document.querySelectorAll('.tab-btn').forEach(b=>b.onclick=e=>this.switchTab(e.target.dataset.tab));
 document.getElementById('transactionForm').onsubmit=e=>{e.preventDefault();this.addTransaction();};
 document.getElementById('invoiceForm').onsubmit=e=>{e.preventDefault();this.createInvoice();};
 ['typeFilter','dateFilter'].forEach(id=>document.getElementById(id).onchange=()=>this.displayTransactions());
 this.updateUI();}
 switchTab(tab){document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.querySelector(`[data-tab='${tab}']`).classList.add('active');
 document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));document.getElementById(tab).classList.add('active');
 if(tab==='transactions')this.displayTransactions();if(tab==='invoices')this.displayInvoices();if(tab==='reports')this.updateChart();}
 addTransaction(){const t={type:transactionType.value,amount:+amount.value,description:description.value,date:transactionDate.value||new Date().toISOString().split('T')[0]};this.transactions.unshift(t);
 localStorage.setItem('transactions',JSON.stringify(this.transactions));this.updateUI();closeModal('transactionModal');transactionForm.reset();this.notify('Transaction added');}
 createInvoice(){const items=[];document.querySelectorAll('.invoice-item').forEach(i=>{const d=i.querySelector('.item-desc').value,q=+i.querySelector('.item-qty').value,p=+i.querySelector('.item-price').value;if(d&&q&&p)items.push({d,q,p,total:q*p});});
 const total=items.reduce((s,i)=>s+i.total,0);const inv={id:'INV-'+Date.now().toString().slice(-5),customerName:customerName.value,customerPhone:customerPhone.value,items,total,date:new Date().toISOString().split('T')[0]};this.invoices.unshift(inv);
 localStorage.setItem('invoices',JSON.stringify(this.invoices));this.displayInvoices();closeModal('invoiceModal');invoiceForm.reset();this.notify('Invoice created');}
 updateUI(){this.displayRecent();this.displayTransactions();this.updateSummary();this.updateChart();}
 updateSummary(){const month=new Date().getMonth();const year=new Date().getFullYear();const tx=this.transactions.filter(t=>new Date(t.date).getMonth()==month&&new Date(t.date).getFullYear()==year);
 const income=tx.filter(t=>t.type==='sale').reduce((s,t)=>s+t.amount,0);const exp=tx.filter(t=>t.type==='expense').reduce((s,t)=>s+t.amount,0);totalBalance.textContent='GMD '+(income-exp).toFixed(2);monthlyIncome.textContent='GMD '+income.toFixed(2);monthlyExpenses.textContent='GMD '+exp.toFixed(2);}
 displayRecent(){recentTransactions.innerHTML=this.transactions.slice(0,5).map(t=>\`<div class='transaction-item'><span>\${t.type==='sale'?'ðŸ’°':'ðŸ’¸'}</span><span>\${t.description}</span><span class='transaction-amount \${t.type==='sale'?'positive':'negative'}'>GMD \${t.amount.toFixed(2)}</span></div>\`).join('');}
 displayTransactions(){let f=this.transactions;const type=typeFilter.value,date=dateFilter.value;if(type!=='all')f=f.filter(t=>t.type===type);if(date)f=f.filter(t=>t.date===date);
 allTransactions.innerHTML=f.map(t=>\`<div class='transaction-item'><span>\${t.type==='sale'?'ðŸ’°':'ðŸ’¸'}</span><span>\${t.description}</span><span class='transaction-amount \${t.type==='sale'?'positive':'negative'}'>GMD \${t.amount.toFixed(2)}</span></div>\`).join('');}
 displayInvoices(){invoicesList.innerHTML=this.invoices.map(i=>\`<div class='transaction-item'><div><b>\${i.id}</b><div>\${i.customerName}</div></div><div><b>GMD \${i.total.toFixed(2)}</b></div></div>\`).join('');}
 updateChart(){const ctx=financeChart.getContext('2d');const labels=[...Array(7)].map((_,i)=>{const d=new Date();d.setDate(d.getDate()-i);return d.toISOString().split('T')[0]}).reverse();
 const income=labels.map(d=>this.transactions.filter(t=>t.date===d&&t.type==='sale').reduce((s,t)=>s+t.amount,0));
 const exp=labels.map(d=>this.transactions.filter(t=>t.date===d&&t.type==='expense').reduce((s,t)=>s+t.amount,0));
 if(window.c)window.c.destroy();window.c=new Chart(ctx,{type:'line',data:{labels,datasets:[{label:'Income',data:income,borderColor:'#2E8B57',tension:.4},{label:'Expenses',data:exp,borderColor:'#dc3545',tension:.4}]}});}
 notify(m){syncMessage.textContent=m;syncNotification.style.display='block';setTimeout(()=>syncNotification.style.display='none',3000);}
}
const app=new GambiaBizLedger();
function showModal(id){document.getElementById(id).style.display='block';}
function closeModal(id){document.getElementById(id).style.display='none';}
function addInvoiceItem(){const d=document.createElement('div');d.className='invoice-item';d.innerHTML=`<input type='text' placeholder='Item description' class='item-desc'><input type='number' placeholder='Qty' class='item-qty'><input type='number' placeholder='Price' class='item-price'>`;invoiceItems.appendChild(d);}
function generateFinancialSummary(){let i=app.transactions.filter(t=>t.type==='sale').reduce((s,t)=>s+t.amount,0);let e=app.transactions.filter(t=>t.type==='expense').reduce((s,t)=>s+t.amount,0);let p=i-e;aiSummary.innerHTML=`<p><b>Total Income:</b> GMD ${i.toFixed(2)}<br><b>Total Expense:</b> GMD ${e.toFixed(2)}<br><b>Profit:</b> GMD ${p.toFixed(2)}</p>`;}
function exportData(){const data={transactions:app.transactions,invoices:app.invoices};const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='gambiabiz-ledger.json';a.click();}
</script>
</body>
</html>